!function(a,b,c){"use strict";function d(a){return g.hasOwnProperty(a.toLowerCase())}function e(a,b){return a[0].type.toLowerCase()===b}function f(a,b,c,d){this.$scope=a,this.$element=b,this.$model=d,this.$id=c.ngModel.toLowerCase(),this.$type=c.type.toLowerCase(),this.trueVal=c.trueValue?c.ngTrueValue:!0}var g={},h={},i='<div class="ym-input"></div>';g.text=function(){function a(a,b){a.$viewChangeListeners.push(function(){b(function(){},1e3)})}return function(b,c,d,e,f,g,j,k){a(e,k),d.ymInputNowrap||(h.text||(h.text=g(i)),h.text(b,function(a){a.addClass("input-"+d.type.toLowerCase()),a.addClass(d.class),c instanceof jQuery||c.after(a),c.wrap(a),c.removeClass(d.class)}))}}(),g.url=function(){var a=g.text;return function(b,c,d,e,f,g,h,i){d.placeholder||(d.placeholder="http://example.com",c[0].placeholder=d.placeholder,a(b,c,d,e,f,g,h,i))}}(),g.number=function(){function a(a){i&&g||(a?(g=function(a){a.$element[0].stepUp(),a.$model.$setViewValue(a.$element[0].value)},i=function(a){a.$element[0].stepDown(),a.$model.$setViewValue(a.$element[0].value)}):(g=function(a){a.$model.$setViewValue(a.$model.$modelValue+a.steps)},i=function(a){a.$model.$setViewValue(a.$model.$modelValue-a.steps)}))}function b(a){return isNaN(a.$model.$modelValue)?(a.$model.$setViewValue(a.min||0),a.$model.$render(),a.$scope.$apply(),!1):!0}function c(b,c,d,f){e(d,"number");this.$scope=b,this.$model=c,this.$element=d,this.steps=f.step?parseInt(f.step,10):1,this.min=f.min?parseInt(f.min,10):!1,this.max=f.max?parseInt(f.max,10):!1,this.$native=e(d,"number")&&d[0].stepUp,a(this.$native)}function d(a){return a.max&&a.$model.$modelValue+a.steps>a.max}function f(a){return a.min&&a.$model.$modelValue-a.steps<a.min}var g,i,j='<div class="ym-input input-number">  <div class="spinners">    <div class="spinner-up"></div>    <div class="spinner-down"></div>  </div></div>';return c.prototype={increment:function(){b(this)&&(d(this)||(g(this),this.$scope.$apply(),this.$model.$render()))},decrement:function(){b(this)&&(f(this)||(i(this),this.$scope.$apply(),this.$model.$render()))}},function(a,b,d,e,f,g){h.number||(h.number=g(j));var i=new c(a,e,b,d);h.number(a,function(a){var c=a.children().children(),d=c.eq(0),e=c.eq(1);d.on("click",function(a){a.preventDefault(),i.increment()}),e.on("click",function(a){a.preventDefault(),i.decrement()}),b.after(a),a.prepend(b)})}}(),g.range=function(){return function(a,b){console.log(e(b,"range")?"native range":"not native range")}}();var j={checkbox:'<div class="ym-input input-checkbox">  <div class="checkbox"></div></div>',radio:'<div ng-model="ngModel" class="ym-input input-radio" >  <div class="radio"></div></div>'};f.prototype={getTemplate:function(){return j[this.$type]},onChange:function(a,b,c){var d=this,e="radio"===d.$type?function(c,e){d.$model.$viewValue===e.$viewValue?b.addClass(a,"checked"):b.removeClass(a,"checked")}:function(c){return c?void(d.$model.$viewValue?b.addClass(a,"checked"):b.removeClass(a,"checked")):d.$scope.$broadcast("attrschanged."+d.$id,d.$model)};return this.$scope.$on("attrschanged."+this.$id,e),this.$scope.$watch(function(){c(function(){d.$scope.$broadcast("attrschanged."+d.$id,e)},200)}),this.$model.$viewChangeListeners.push(e),e}};g.checkbox=function(){var a,b=j.checkbox;return function(c,d,e,f,g,h,i,j,k){var l,m;a||(a=h(b)),a(c,function(a){d.after(a),a.append(d),l=a,m=a.children().eq(0)});var n=c.$new(!0);n.model=f,n.$watch("model.$modelValue",function(a){a?k.addClass(m,"checked"):k.removeClass(m,"checked")}),l.on("click",function(){c.$apply(function(){d.prop("checked",!f.$modelValue),f.$setViewValue(!f.$modelValue)})})}}(),g.radio=function(){var a,c=j.radio,d={};return function(e,f,g,h,i,j,k,l,m){var n,o;d[g.name]=d[g.name]||[],d[g.name].push({radio:f,model:h}),a||(a=j(c)),a(e,function(a){f.after(a),a.append(f),n=a,o=a.children().eq(0)});var p=e.$new(!0);p.model=h,p.$watch("model.$modelValue",function(){b.forEach(d[g.name],function(a){var b=a.radio.parent().children().eq(0);a.radio.prop("checked")?m.addClass(b,"checked"):m.removeClass(b,"checked")})}),n.on("click",function(){e.$apply(function(){f.prop("checked",!0),h.$setViewValue(g.value)})})}}(),g.date=function(){return function(a,b){console.log(e(b,"date")?"native date":"not native date")}}();var k=["$compile","$window","$timeout","$animate","$parse",function(a,b,c,e,f){return{priority:-1e4,restrict:"EA",require:"?^ngModel",compile:function(i,j,k){return h[j.type]=!1,function(h,i,j,l){l&&d(j.type)&&g[j.type.toLowerCase()](h,i,j,l,k,a,b,c,e,f)}}}}],l=["$compile",function(){var a='<div><label ng-repeat="label in labels">{{label.label}}</label></div>';return{restrict:"AC",transclude:!0,replace:!0,scope:{multiple:"=",labels:"="},link:function(){},template:a}}],m=["$compile","yamUiScrollerService",function(a,b){var c='<ul><li ng-repeat="option in options" ng-switch on="option.hasGroup" ng-class="{true: \'selected\'}[option.selected]"><div class="ym-optgroup" ng-switch-when="true"><label class="optgroup"> {{option.group.label}} </label><ul><li ng-repeat="opt in option.group.options" ng-class="{true: \'selected\'}[opt.selected]" ng-click="select({value:opt})"><div class="ym-option"><label>{{opt.label}}</label></div></li></ul></div><div class="ym-option" ng-switch-default ng-click="select({value:option})"><label>{{option.label}}</label></div></li></ul>';return{restrict:"C",scope:{require:"?^select",options:"=",select:"&",selected:"&"},link:function(a,c){b.instance(c),c.on("$destroy",function(){b.destroy()}),console.log(a.options)},template:c}}],n=["$compile","$timeout","$window","yamUiScrollerService",function(a,d,e,f){function g(a,c){var d=[];return b.forEach(a,function(a){var e=(b.element(a),h(a,c));e&&d.push(e)}),d}function h(a,b){var d,e,f={};switch(a.nodeName.toLowerCase()){case"option":return e=a.label?a.label:a.text.replace(/(^\s+|\s+$)/,""),e=""===e?c:e,d=a.value?a.value:f.label,d="?"===d[0]?!1:d,console.log(d),e||d?(f.hasGroup=!1,f.label=e,f.value=d,f.selected=a.selected,f.selected&&b.selectOption(f),f):!1;case"optgroup":return f.hasGroup=!0,f.group={label:a.label,options:g(a.childNodes,b)},f;default:return!1}}function i(a){b.forEach(a,function(a){a.group?i(a.group):a.selected=!1})}function j(a,b){i(a.optionList),b.selected=!0,a.labels=[b],console.log(arguments),console.log(b.value),a.model=b.value}function k(a,b){console.log(arguments);var d=a.selected.indexOf(b.value);-1===d?(b.selected=!0,a.selected.push(b.value),a.labels.push(b)):(b.selected=!1,a.selected.splice(d,1),a.labels.splice(d,1)),a.model=a.selected.length?a.selected:c}function l(a,c){a.selectOption=b.bind(null,j,a),n(c,a)}function m(a,c){a.selected=[],a.selectOption=b.bind(null,k,a),n(c,a)}function n(a,b){a.on("click",function(a){a.preventDefault(),b.show=!b.show,b.$apply(),b.show&&d(function(){f.update()},100)}),o(b,a)}function o(a,c){b.element(e).on("click",function(d){if(a.show){for(var e=6,f=b.element(d.target);e--;){if(f&&f[0]===c[0])return;f=f.parent()}a.show=!a.show,a.$apply()}})}function p(a,c,d,e){d(a,function(a,d){var f=b.element(document.createElement("div"));f.addClass("select"),c.after(a),a.append(f),f.append(c),e(d,function(a){c.append(a)}),q(d,a)})}function q(a,b){a.multiple?m(a,b):l(a,b)}var r='<div class="ym-select" ng-class="{true:\'open\'}[show]"><label class="ym-select-label" labels="labels"></label><div ng-if="show" class="ym-select-options" select="selectOption(value)" options="optionList"></div></div>';return{replace:!1,transclude:!0,scope:{model:"=ngModel",multiple:"="},require:["select","?ngModel"],restrict:"E",compile:function(b,c,d){var e;return function(b,c){var f,h,i=c;b.labels=[],b.optionList=[],b.show=!1,e||(e=a(r)),p(b,c,e,d),b.$watch(function(){var a=i.children();h!==a.length&&(f=a,h=a.length,b.$broadcast("updateList",a,b))}),b.$on("updateList",function(a,b,c){c.optionList=g(b,c)})}}}}],o=["$log","$parse","$q",function(a,d,e){return{replace:!0,transclude:!0,require:"?^ymTabset",restrict:"AE",link:function(f,g,h,i){if(i){var j,k=f.$new(!0),l=!1,m=f.$eval(h.ymTabResolving),n=f.$eval(h.ymTabResolvingCaller),o=b.isFunction(m),p={active:d(h.active)(),label:f.label};l=p.active,i.addTab(p),k.ctrl=i,k.tab=p,k.$watch("ctrl.enabled",function(a){a!==c&&(a?(j&&j.reject(),p.active=l||!1):(l=p.active,p.active=!0))}),k.$watch("tab.active",function(b){return a.info("state",b),b&&b!==c?o?(j=e.defer(),j.promise.then(function(){a.info("dererred rm inactive"),g.removeClass("waiting"),g.removeClass("inactive")}),g.addClass("waiting"),n?m.call(n,j,f.$index):m(j,f.$index)):(a.info("rm inactive"),void g.removeClass("inactive")):void(b===!1&&(j&&j.reject(),a.info("add inactive"),g.addClass("inactive")))}),h.$observe("label",function(a){a&&(p.label=a)})}},template:'<div class="ym-tab" ng-transclude></div>'}}],p=["$log","$sce",function(a,c){function d(a,b,c){this.$scope=a,this.tabs=[],this.$element=b,this.$attrs=c}return d.prototype={addTab:function(b){a.info("add tab"),this.tabs.push(b),a.debug(b)},setActiveTab:function(a){this.tabs[a]&&(b.forEach(this.tabs,function(a){a.active=!1}),this.tabs[a].active=!0)},setDisabled:function(){this.enabled=!1},setEnabled:function(){this.enabled=!0}},d.$inject=["$scope","$element","$attrs"],{transclude:!0,replace:!0,restrict:"A",controller:d,controllerAs:"controller",link:function(a,b,d,e){d.$observe("ymTabset",function(b){a.$eval(b)?a.controller.setDisabled():a.controller.setEnabled()}),a.setActive=function(b){e.enabled!==!1&&a.controller.setActiveTab(b)},a.setActive(0),a.toTrusted=function(a){return c.trustAsHtml(a)}},template:'<div class="ym-tabset">  <div class="tab-header">    <ul>      <li ng-repeat="tab in controller.tabs track by $index" ng-click="setActive($index)" ng-style="{width: (100 / controller.tabs.length) + \'%\'}" ng-class="{false: \'inactive\'}[tab.active]" class="tab-label"><label ng-bind-html="toTrusted(tab.label)"></label></li>    </ul>  </div>  <div class="tab-content" ng-transclude></div></div>'}}];b.module("yam.ui",["ngAnimate"]).config(["$provide",function(a){a.service("yamUiScrollerService",function(){return{instance:function(a){this.setInstance(new IScroll(a[0],{scrollbars:!0,mouseWheel:!0,eventPassthrough:!1,preventDefault:!1}))},setInstance:function(a){this._instance=a},destroy:function(){this._instance.destroy()},update:function(){this._instance.refresh()}}})}]).directive("ymSelectLabel",l).directive("ymSelectOptions",m).directive("select",n).directive("input",k).directive("ymTab",o).directive("ymTabset",p)}(this,this.angular);